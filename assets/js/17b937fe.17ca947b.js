"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[857],{8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var o=s(6540);const t={},l=o.createContext(t);function a(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(l.Provider,{value:n},e.children)}},8778:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"workload_myths/DaemonSet_always_schedule_pods_on_all_nodes","title":"Myth: DaemonSet always schedule pods on all nodes.","description":"Expect DaemonSet to Run on Every Node? Not So Fast! Many assume that a DaemonSet automatically schedules a Pod on every node in the cluster. While this is generally true, there are several cases where DaemonSet does not schedule Pods on all nodes.","source":"@site/docs/workload_myths/DaemonSet_always_schedule_pods_on_all_nodes.md","sourceDirName":"workload_myths","slug":"/workload_myths/DaemonSet_always_schedule_pods_on_all_nodes","permalink":"/docs/workload_myths/DaemonSet_always_schedule_pods_on_all_nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/workload_myths/DaemonSet_always_schedule_pods_on_all_nodes.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"workloadSidebar","previous":{"title":"Myth: Rolling Updates Are Only Supported by Deployments","permalink":"/docs/workload_myths/Rolling_Updates_Are_Only_Supported_by_Deployments"},"next":{"title":"Myth: Deployment Supports All Pod Restart Policies","permalink":"/docs/workload_myths/Deployment_Supports_All_Pod_Restart_Policies"}}');var t=s(4848),l=s(8453);const a={sidebar_position:4},r="Myth: DaemonSet always schedule pods on all nodes.",d={},i=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality:",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function c(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"myth-daemonset-always-schedule-pods-on-all-nodes",children:"Myth: DaemonSet always schedule pods on all nodes."})}),"\n",(0,t.jsx)(n.p,{children:"Expect DaemonSet to Run on Every Node? Not So Fast! Many assume that a DaemonSet automatically schedules a Pod on every node in the cluster. While this is generally true, there are several cases where DaemonSet does not schedule Pods on all nodes."}),"\n",(0,t.jsx)(n.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The default behavior of a DaemonSet is to run a Pod on each node, leading to the assumption that it applies universally."}),"\n",(0,t.jsx)(n.li,{children:"Many Kubernetes tutorials demonstrate cluster-wide scheduling without mentioning constraints."}),"\n",(0,t.jsx)(n.li,{children:"The impact of node taints, selectors, and affinity rules is often overlooked."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"the-reality",children:"The Reality:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"DaemonSet Scheduling Is Conditional."})," It does not always schedule Pods on every node. Various factors can prevent or control where Pods are scheduled:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Taints and Tolerations"})," \u2013 Nodes with taints will reject DaemonSet Pods unless explicitly tolerated."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node Selectors"})," \u2013 DaemonSet Pods are only scheduled on nodes matching the specified labels."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Affinity and Anti-Affinity Rules"})," \u2013 Custom scheduling rules can limit DaemonSet Pod placement."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,t.jsx)(n.p,{children:"Let\u2019s see a example where DaemonSet does NOT schedule Pods on all nodes:\r\nNode Selector: DaemonSet Pods Only on Labeled Node"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"apiVersion: apps/v1\r\nkind: DaemonSet\r\nmetadata:\r\n  name: my-daemonset\r\nspec:\r\n  template:\r\n    spec:\r\n      nodeSelector:\r\n        custom-role: worker-node\r\n      containers:\r\n      - name: my-daemon\r\n        image: my-app:v2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, Pods will only run on nodes labeled ",(0,t.jsx)(n.code,{children:"custom-role=worker-node"}),", skipping all others."]}),"\n",(0,t.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DaemonSets do not always schedule on all nodes"}),"\u2014constraints like taints, selectors, and affinity rules affect placement."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"By default, they schedule on worker nodes"})," but require tolerations for control-plane nodes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Understanding scheduling logic is crucial"})," to ensure Pods run where they are needed."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);