"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5876],{7701:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"k8s-core-myths/networking-myths/kube_proxy_assign_IP_address_to_Pods","title":"Myth: kube-proxy assign IP address to Pods","description":"A common belief among Kubernetes users is that kube-proxy is responsible for assigning IP addresses to pods. After all, it manages networking rules and enables communication between services\u2014so it must be the component handling pod IPs, right?","source":"@site/docs/k8s-core-myths/networking-myths/kube_proxy_assign_IP_address_to_Pods.md","sourceDirName":"k8s-core-myths/networking-myths","slug":"/k8s-core-myths/networking-myths/kube_proxy_assign_IP_address_to_Pods","permalink":"/k8s-core-myths/networking-myths/kube_proxy_assign_IP_address_to_Pods","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-core-myths/networking-myths/kube_proxy_assign_IP_address_to_Pods.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"k8sCoreMythsSidebar","previous":{"title":"Networking Myths","permalink":"/category/networking-myths"},"next":{"title":"Myth: ClusterIP Service is Only for Internal Traffic","permalink":"/k8s-core-myths/networking-myths/ClusterIP_Service_is_Only_for_Internal_Traffic"}}');var i=n(4848),r=n(8453);const o={sidebar_position:2},a="Myth: kube-proxy assign IP address to Pods",l={},d=[{value:"Why Does This Myth Exist?",id:"why-does-this-myth-exist",level:3},{value:"The Reality",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function h(e){const s={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"myth-kube-proxy-assign-ip-address-to-pods",children:"Myth: kube-proxy assign IP address to Pods"})}),"\n",(0,i.jsx)(s.p,{children:"A common belief among Kubernetes users is that kube-proxy is responsible for assigning IP addresses to pods. After all, it manages networking rules and enables communication between services\u2014so it must be the component handling pod IPs, right?"}),"\n",(0,i.jsx)(s.h3,{id:"why-does-this-myth-exist",children:"Why Does This Myth Exist?"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Kube-proxy\u2019s prominent role in networking:"})," Kube-proxy is integral to service-level networking in Kubernetes. Since it manages traffic routing between services and uses iptables, many assume it also handles pod-level networking, including IP assignment."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Confusion with iptables:"})," Kube-proxy\u2019s involvement with iptables and traffic forwarding may create the impression that it manages all networking tasks, including assigning IPs to pods."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Misunderstanding of Kubernetes components:"})," Newcomers to Kubernetes often see kube-proxy running in the cluster and mistakenly believe it is responsible for all networking-related operations, including pod IP allocation."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"the-reality",children:"The Reality"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Pod IP allocation is the responsibility of the CNI (Container Network Interface) plugin, not kube-proxy."})," The CNI is responsible for assigning network interfaces and IP addresses to each pod when they are created."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Kube-proxy\u2019s role is service-level networking:"})," It ensures traffic reaches the right pods by managing network rules for services, but it does not assign IP addresses to the pods themselves."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Pods depend on the CNI:"})," If there\u2019s no CNI plugin installed or running, Kubernetes pods won\u2019t receive an IP address, even if kube-proxy is operational."]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,i.jsx)(s.p,{children:"To verify that kube-proxy is not responsible for pod IP allocation, follow these steps:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 1: Check the IP of an existing pod before disabling kube-proxy"})}),"\n",(0,i.jsx)(s.p,{children:"Run the following command to view the pod\u2019s details:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"kubectl get pods -o wide\n"})}),"\n",(0,i.jsx)(s.p,{children:"Example output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"NAME          READY STATUS    IP          NODE\r\nnginx-abc123  1/1   Running  10.244.1.2  worker-node-1\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 2: Disable kube-proxy temporarily"})}),"\n",(0,i.jsx)(s.p,{children:"Scale down the kube-proxy deployment to zero replicas:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",children:"kubectl scale deployment/kube-proxy -n kube-system --replicas=0\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 3: Create a new pod and check if it receives an IP address"})}),"\n",(0,i.jsx)(s.p,{children:"Launch a new pod and Then, verify the new pod's details::"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",children:"kubectl run test-pod --image=nginx --restart=Never\r\nkubectl get pods -o wide\n"})}),"\n",(0,i.jsx)(s.p,{children:"You\u2019ll observe that the new pod still receives an IP address, even with kube-proxy disabled, which demonstrates that CNI, not kube-proxy, is responsible for assigning pod IPs."}),"\n",(0,i.jsx)(s.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Kube-proxy does not assign pod IPs:"})," Pod IP allocation is handled by the CNI plugin, not kube-proxy."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Kube-proxy\u2019s role is service routing:"})," It manages the traffic routing for services, but not the network configuration or IP assignment for pods."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Without a CNI plugin, pods will fail to receive IP addresses,"})," regardless of whether kube-proxy is running."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Always ensure a CNI plugin is installed"})," when setting up Kubernetes to guarantee proper networking functionality for pods."]}),"\n"]})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var t=n(6540);const i={},r=t.createContext(i);function o(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);