"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5239],{7263:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"k8s-core-myths/workload-myths/DaemonSet_always_schedule_pods_on_all_nodes","title":"Myth: DaemonSet always schedule pods on all nodes.","description":"Expect DaemonSet to Run on Every Node? Not So Fast! Many assume that a DaemonSet automatically schedules a Pod on every node in the cluster. While this is generally true, there are several cases where DaemonSet does not schedule Pods on all nodes.","source":"@site/docs/k8s-core-myths/workload-myths/DaemonSet_always_schedule_pods_on_all_nodes.md","sourceDirName":"k8s-core-myths/workload-myths","slug":"/k8s-core-myths/workload-myths/DaemonSet_always_schedule_pods_on_all_nodes","permalink":"/k8s-core-myths/workload-myths/DaemonSet_always_schedule_pods_on_all_nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-core-myths/workload-myths/DaemonSet_always_schedule_pods_on_all_nodes.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"k8sCoreMythsSidebar","previous":{"title":"Myth: Rolling Updates Are Only Supported by Deployments","permalink":"/k8s-core-myths/workload-myths/Rolling_Updates_Are_Only_Supported_by_Deployments"},"next":{"title":"Myth: Deployment Supports All Pod Restart Policies","permalink":"/k8s-core-myths/workload-myths/Deployment_Supports_All_Pod_Restart_Policies"}}');var o=n(4848),l=n(8453);const a={sidebar_position:4},r="Myth: DaemonSet always schedule pods on all nodes.",d={},i=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality:",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function h(e){const s={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"myth-daemonset-always-schedule-pods-on-all-nodes",children:"Myth: DaemonSet always schedule pods on all nodes."})}),"\n",(0,o.jsx)(s.p,{children:"Expect DaemonSet to Run on Every Node? Not So Fast! Many assume that a DaemonSet automatically schedules a Pod on every node in the cluster. While this is generally true, there are several cases where DaemonSet does not schedule Pods on all nodes."}),"\n",(0,o.jsx)(s.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"The default behavior of a DaemonSet is to run a Pod on each node, leading to the assumption that it applies universally."}),"\n",(0,o.jsx)(s.li,{children:"Many Kubernetes tutorials demonstrate cluster-wide scheduling without mentioning constraints."}),"\n",(0,o.jsx)(s.li,{children:"The impact of node taints, selectors, and affinity rules is often overlooked."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"the-reality",children:"The Reality:"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"DaemonSet Scheduling Is Conditional."})," It does not always schedule Pods on every node. Various factors can prevent or control where Pods are scheduled:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Taints and Tolerations"})," \u2013 Nodes with taints will reject DaemonSet Pods unless explicitly tolerated."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Node Selectors"})," \u2013 DaemonSet Pods are only scheduled on nodes matching the specified labels."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Affinity and Anti-Affinity Rules"})," \u2013 Custom scheduling rules can limit DaemonSet Pod placement."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,o.jsx)(s.p,{children:"Let\u2019s see a example where DaemonSet does NOT schedule Pods on all nodes:\r\nNode Selector: DaemonSet Pods Only on Labeled Node"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"apiVersion: apps/v1\r\nkind: DaemonSet\r\nmetadata:\r\n  name: my-daemonset\r\nspec:\r\n  template:\r\n    spec:\r\n      nodeSelector:\r\n        custom-role: worker-node\r\n      containers:\r\n      - name: my-daemon\r\n        image: my-app:v2\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Here, Pods will only run on nodes labeled ",(0,o.jsx)(s.code,{children:"custom-role=worker-node"}),", skipping all others."]}),"\n",(0,o.jsx)(s.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"DaemonSets do not always schedule on all nodes"}),"\u2014constraints like taints, selectors, and affinity rules affect placement."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"By default, they schedule on worker nodes"})," but require tolerations for control-plane nodes."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Understanding scheduling logic is crucial"})," to ensure Pods run where they are needed."]}),"\n"]})]})}function c(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>r});var t=n(6540);const o={},l=t.createContext(o);function a(e){const s=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(l.Provider,{value:s},e.children)}}}]);