"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[446],{1067:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"workload_myths/Complete_application_can_be_rolled_back_in_Kubernetes","title":"Myth: Complete application can be rolled back in Kubernetes","description":"A team deployed a new version of their microservices-based application in Kubernetes. Soon after, they noticed critical issues and decided to roll back using:","source":"@site/docs/workload_myths/Complete_application_can_be_rolled_back_in_Kubernetes.md","sourceDirName":"workload_myths","slug":"/workload_myths/Complete_application_can_be_rolled_back_in_Kubernetes","permalink":"/workload_myths/Complete_application_can_be_rolled_back_in_Kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/workload_myths/Complete_application_can_be_rolled_back_in_Kubernetes.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"workloadSidebar","previous":{"title":"Overview","permalink":"/workload_myths/overview"},"next":{"title":"Myth: Rolling Updates Are Only Supported by Deployments","permalink":"/workload_myths/Rolling_Updates_Are_Only_Supported_by_Deployments"}}');var i=t(4848),a=t(8453);const r={sidebar_position:2},l="Myth: Complete application can be rolled back in Kubernetes",o={},c=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality:",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"myth-complete-application-can-be-rolled-back-in-kubernetes",children:"Myth: Complete application can be rolled back in Kubernetes"})}),"\n",(0,i.jsx)(n.p,{children:"A team deployed a new version of their microservices-based application in Kubernetes. Soon after, they noticed critical issues and decided to roll back using:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl rollout undo deployment my-app\n"})}),"\n",(0,i.jsx)(n.p,{children:"They expected everything to return to normal instantly. Instead, they faced database inconsistencies, mismatched API versions, and persistent storage corruption. Their rollback didn\u2019t restore the full application state\u2014only the container images reverted."}),"\n",(0,i.jsx)(n.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,i.jsx)(n.p,{children:"This myth persists because many assume Kubernetes rollbacks work like traditional application restore mechanisms. The key reasons behind this misconception are:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rollback Command Appears Comprehensive"})," \u2013 The ",(0,i.jsx)(n.code,{children:"kubectl rollout undo"})," command suggests it restores everything, but it only affects Deployments, not databases, ConfigMaps, or storage."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Stateless vs. Stateful Confusion"})," \u2013 Stateless apps can be rolled back easily, but stateful workloads (databases, message queues, persistent volumes) require additional rollback strategies."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Lack of Awareness About External Dependencies"})," \u2013 Applications in Kubernetes often depend on external databases, cloud storage, or third-party services, which are unaffected by a simple rollback."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expectation from Traditional Monolithic Rollbacks"})," \u2013 In legacy systems, rolling back a single instance often meant restoring the full application state, whereas Kubernetes primarily focuses on container lifecycle management."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Kubernetes Default Behavior is Not Full Recovery"})," \u2013 Kubernetes prioritizes high availability and rolling updates but does not track or revert external dependencies automatically."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This misunderstanding leads teams to believe that a simple Kubernetes rollback will restore the entire application state when, in reality, it only reverts container versions and pod specifications."}),"\n",(0,i.jsx)(n.h3,{id:"the-reality",children:"The Reality:"}),"\n",(0,i.jsx)(n.p,{children:"Rolling back a deployment does not mean your entire application is restored. Kubernetes can revert container images and pod specifications, but:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Databases Require Explicit Rollbacks"})," \u2013 Schema migrations must be reversible or manually handled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Persistent Volumes Retain Data"})," \u2013 Rolling back an app doesn\u2019t roll back stored data unless snapshots or backups exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration Drift Can Occur"})," \u2013 Changes in ConfigMaps or Secrets won\u2019t automatically revert unless managed separately."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interdependent Services Can Break"})," \u2013 A rollback might mismatch versions between microservices, causing API incompatibilities."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Deploy an app and apply a schema migration"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl create deployment my-app --image=my-app:v1  \r\nkubectl apply -f database-migration.yaml  # Applies a schema change  \n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Roll back the deployment"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl rollout undo deployment my-app  \n"})}),"\n",(0,i.jsx)(n.p,{children:"Result: The app\u2019s code is rolled back, but the database remains on the new schema, potentially breaking compatibility."}),"\n",(0,i.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kubernetes rollbacks only revert Deployments, not the entire application state."}),"\n",(0,i.jsx)(n.li,{children:"Persistent data, ConfigMaps, and external services are unaffected by a rollback."}),"\n",(0,i.jsx)(n.li,{children:"Database schema changes, inter-service dependencies, and persistent storage require separate rollback strategies."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);