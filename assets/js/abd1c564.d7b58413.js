"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[1921],{8219:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"k8s-core-myths/security-myths/Pod_Security_Admission_enforces_security_on_running_Pods","title":"Myth: Pod Security Admission enforces security on running Pods","description":"During a production security review, a team proudly stated:","source":"@site/docs/k8s-core-myths/security-myths/Pod_Security_Admission_enforces_security_on_running_Pods.md","sourceDirName":"k8s-core-myths/security-myths","slug":"/k8s-core-myths/security-myths/Pod_Security_Admission_enforces_security_on_running_Pods","permalink":"/k8s-core-myths/security-myths/Pod_Security_Admission_enforces_security_on_running_Pods","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-core-myths/security-myths/Pod_Security_Admission_enforces_security_on_running_Pods.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"k8sCoreMythsSidebar","previous":{"title":"Myth: Kubernetes Service Accounts Pull Container Images","permalink":"/k8s-core-myths/security-myths/Kubernetes_Service_Accounts_Pull_Container_Images"},"next":{"title":"Scheduling Myths","permalink":"/category/scheduling-myths"}}');var r=s(4848),t=s(8453);const l={sidebar_position:4},c="Myth: Pod Security Admission enforces security on running Pods",d={},o=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality:",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function a(e){const n={code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"myth-pod-security-admission-enforces-security-on-running-pods",children:"Myth: Pod Security Admission enforces security on running Pods"})}),"\n",(0,r.jsx)(n.p,{children:"During a production security review, a team proudly stated:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"\u201cWe\u2019ve enabled Pod Security Admission with restricted mode. All insecure Pods are blocked now.\u201d"})}),"\n",(0,r.jsx)(n.p,{children:"Out of curiosity, we listed running Pods across namespaces\u2014and found multiple Pods still running with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"privileged: true"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"hostPath mounts"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"hostNetwork: true"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When asked why those Pods still existed, the answer was simple and confident:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"\u201cPSA will take care of them.\u201d"})}),"\n",(0,r.jsx)(n.p,{children:"That assumption is far more common than people realize."}),"\n",(0,r.jsx)(n.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"The word \u201cenforces\u201d is misleading"}),"\n",(0,r.jsx)(n.p,{children:"Enforcement sounds continuous, but PSA enforcement is event-based, not runtime-based."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Confusion with runtime security tools"}),"\n",(0,r.jsx)(n.p,{children:"Tools like Falco, SELinux, AppArmor, or eBPF-based detectors act at runtime. PSA does not."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Pod Security Policy (PSP) legacy expectations"}),"\n",(0,r.jsx)(n.p,{children:"PSP was often misunderstood as a runtime control, and that misconception carried over."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Lack of visibility into admission controllers"}),"\n",(0,r.jsx)(n.p,{children:"Admission controllers operate only during API requests, which many users never see directly."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-reality",children:"The Reality:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pod Security Admission only evaluates Pod specifications during API server admission events."})}),"\n",(0,r.jsx)(n.p,{children:"That means:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"It runs only when a Pod is created or updated"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"It does not monitor, mutate, restart, or kill running Pods"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Existing Pods are completely ignored unless they are recreated"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If a Pod was created before PSA enforcement was enabled, it will:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Continue running"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Keep all its privileges"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Remain unaffected indefinitely"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"PSA answers only one question:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"\u201cShould this Pod spec be allowed to enter the cluster right now?\u201d"})}),"\n",(0,r.jsx)(n.p,{children:"It does not answer:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u201cIs this Pod safe at runtime?\u201d"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u201cIs this Pod still compliant?\u201d"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u201cShould this Pod be stopped?\u201d"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Create an insecure Pod before PSA enforcement"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: privileged-pod\r\nspec:\r\n  containers:\r\n  - name: app\r\n    image: nginx\r\n    securityContext:\r\n      privileged: true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Apply it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kubectl apply -f pod.yaml\n"})}),"\n",(0,r.jsx)(n.p,{children:"The Pod runs successfully."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 2: Enable Pod Security Admission (restricted)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl label namespace default \\\r\n  pod-security.kubernetes.io/enforce=restricted\n"})}),"\n",(0,r.jsx)(n.p,{children:"The Pod will now successfully pull the image and start, proving that registry authentication depends on imagePullSecrets, not ServiceAccount permissions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 3: Observe the existing Pod"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get pod privileged-pod\n"})}),"\n",(0,r.jsx)(n.p,{children:"Result:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Pod is still Running"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"No warning"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"No eviction"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"No enforcement action"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 4: Try creating the same Pod again"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl delete pod privileged-pod\r\nkubectl apply -f pod.yaml\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now it fails:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'Error: violates PodSecurity "restricted": privileged containers are not allowed\n'})}),"\n",(0,r.jsx)(n.p,{children:"This confirms:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"PSA blocks new requests"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"PSA ignores existing runtime state"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Pod Security Admission  is not a runtime security mechanism"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"It does not enforce security on running Pods"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Existing Pods remain untouched until recreated"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"PSA is a preventive guardrail, not a corrective system"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Runtime security requires additional tools beyond PSA"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);