"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[495],{3351:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"k8s-core-myths/storage-myths/Kubernetes_PersistentVolumeClaim_Can_Be_Resized","title":"Myth: Kubernetes PersistentVolumeClaim Can Be Resized","description":"During a design discussion, a team member confidently stated that \u201cPVCs in Kubernetes are fully resizable \u2014 you can increase or decrease storage whenever you want.\u201d This assumption influenced their storage planning and automated cleanup strategy.","source":"@site/docs/k8s-core-myths/storage-myths/Kubernetes_PersistentVolumeClaim_Can_Be_Resized.md","sourceDirName":"k8s-core-myths/storage-myths","slug":"/k8s-core-myths/storage-myths/Kubernetes_PersistentVolumeClaim_Can_Be_Resized","permalink":"/k8s-core-myths/storage-myths/Kubernetes_PersistentVolumeClaim_Can_Be_Resized","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-core-myths/storage-myths/Kubernetes_PersistentVolumeClaim_Can_Be_Resized.md","tags":[],"version":"current","frontMatter":{},"sidebar":"k8sCoreMythsSidebar","previous":{"title":"Myth: Kubernetes Cluster Can Have Only One Default StorageClass","permalink":"/k8s-core-myths/storage-myths/Kubernetes_Cluster_Can_Have_Only_One_Default_StorageClass"},"next":{"title":"Myth: ReadWriteOnce mode allows only a single Pod to access the volume","permalink":"/k8s-core-myths/storage-myths/ReadWriteOnce_mode_allows_only_a_single_Pod_to_access_the_volume"}}');var t=n(4848),i=n(8453);const a={},l="Myth: Kubernetes PersistentVolumeClaim Can Be Resized",c={},o=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function d(e){const s={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsxs)(s.h1,{id:"myth-kubernetes-persistentvolumeclaim-can-be-resized",children:["Myth: Kubernetes ",(0,t.jsx)(s.code,{children:"PersistentVolumeClaim"})," Can Be Resized"]})}),"\n",(0,t.jsx)(s.p,{children:"During a design discussion, a team member confidently stated that \u201cPVCs in Kubernetes are fully resizable \u2014 you can increase or decrease storage whenever you want.\u201d This assumption influenced their storage planning and automated cleanup strategy."}),"\n",(0,t.jsx)(s.p,{children:"The misunderstanding became clear only when they attempted to shrink a PVC and discovered that Kubernetes does not support reducing its size, leading to unnecessary downtime and manual recovery work."}),"\n",(0,t.jsx)(s.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,t.jsx)(s.p,{children:"This misconception commonly arises because:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Kubernetes documentation and almost all blogs use the term \u201cresize,\u201d which people assume includes both expansion and shrinking."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Storage systems outside Kubernetes (such as cloud block storage) often support dynamic resizing, which leads developers to expect the same flexibility at the PVC level."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Kubernetes allows expansion of PVCs starting from v1.11+, so users incorrectly generalize that resizing must also include shrinking."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Because of these factors, the term \u201cresize\u201d is frequently interpreted incorrectly."}),"\n",(0,t.jsx)(s.h3,{id:"the-reality",children:"The Reality"}),"\n",(0,t.jsx)(s.p,{children:"Kubernetes PVCs can be expanded but cannot be shrunk. The resize operation is unidirectional."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Kubernetes allows increasing PVC size when the StorageClass supports volume expansion."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Kubernetes does not support reducing a PVC\u2019s requested storage."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Shrinking storage poses significant data integrity risks (such as truncation), so Kubernetes explicitly disallows it."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"The underlying storage provider might support shrink operations, but Kubernetes does not expose this capability to users."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"If a smaller volume is required, the only safe approach is to create a new, smaller PVC and migrate data manually."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"In summary, calling PVCs \u201cresizable\u201d is misleading because Kubernetes supports only expansion \u2014 not shrinkage."}),"\n",(0,t.jsx)(s.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Step 1: Create a PVC"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"apiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  name: pvc-demo\r\nspec:\r\n  accessModes:\r\n    - ReadWriteOnce\r\n  storageClassName: standard\r\n  resources:\r\n    requests:\r\n      storage: 5Gi\r\n\n"})}),"\n",(0,t.jsx)(s.p,{children:"Apply it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"kubectl apply -f pvc.yaml\n"})}),"\n",(0,t.jsx)(s.p,{children:"Verify:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"kubectl get pvc pvc-demo\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Step 2: Expand the PVC"})}),"\n",(0,t.jsx)(s.p,{children:"Edit the PVC:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"kubectl edit pvc pvc-demo\r\n\n"})}),"\n",(0,t.jsx)(s.p,{children:"Change:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"resources:\r\n  requests:\r\n    storage: 10Gi\n"})}),"\n",(0,t.jsx)(s.p,{children:"Kubernetes will allow this change"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"kubectl get pvc pvc-demo\n"})}),"\n",(0,t.jsx)(s.p,{children:"Status shows:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"pvc-demo   Bound   10Gi   ...\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Step 3: Attempt to Shrink the PVC"})}),"\n",(0,t.jsx)(s.p,{children:"Edit the PVC again:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"kubectl edit pvc pvc-demo\r\n\n"})}),"\n",(0,t.jsx)(s.p,{children:"Change:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"resources:\r\n  requests:\r\n    storage: 2Gi\n"})}),"\n",(0,t.jsx)(s.p,{children:"Kubernetes rejects the change with an error similar to:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'persistentvolumeclaims "pvc-demo" is invalid: \r\nspec.resources.requests.storage: Forbidden: field can not be less than status.capacity\r\n\n'})}),"\n",(0,t.jsx)(s.p,{children:"The PVC remains at 10Gi, confirming that shrink operations are blocked."}),"\n",(0,t.jsx)(s.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A PVC in Kubernetes ",(0,t.jsx)(s.strong,{children:"can only be expanded, never shrunk."})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The StorageClass must have ",(0,t.jsx)(s.code,{children:"allowVolumeExpansion=true"})," to support expansion."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Kubernetes explicitly prevents shrink operations to protect data from corruption."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Shrinking a PVC requires creating a new, smaller PVC and migrating data manually."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The term ",(0,t.jsx)(s.strong,{children:"\u201cresize\u201d"})," is misleading; technically, Kubernetes supports only volume expansion."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>l});var r=n(6540);const t={},i=r.createContext(t);function a(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);