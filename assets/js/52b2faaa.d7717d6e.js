"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5011],{6514:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"k8s-domain-myths/application-development/Applications-Don\u2019t-Need-Readiness-or-Liveness-Probes","title":"Myth: Applications Don\u2019t Need Readiness or Liveness Probes","description":"A team deployed a microservice without readiness or liveness probes. In production, Pods started receiving traffic before fully initializing, causing immediate 500 errors. One Pod even hung during startup, but Kubernetes didn\u2019t restart it because there was no liveness probe.","source":"@site/docs/k8s-domain-myths/application-development/Applications-Don\u2019t-Need-Readiness-or-Liveness-Probes.md","sourceDirName":"k8s-domain-myths/application-development","slug":"/k8s-domain-myths/application-development/Applications-Don\u2019t-Need-Readiness-or-Liveness-Probes","permalink":"/k8s-domain-myths/application-development/Applications-Don\u2019t-Need-Readiness-or-Liveness-Probes","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-domain-myths/application-development/Applications-Don\u2019t-Need-Readiness-or-Liveness-Probes.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"k8sDomainMythsSidebar","previous":{"title":"Application Development Myths","permalink":"/category/application-development-myths"},"next":{"title":"Myth: Kubernetes Supports In-Place Application Upgrades","permalink":"/k8s-domain-myths/application-development/Kubernetes-Supports-In-Place-Application-Upgrades"}}');var t=s(4848),r=s(8453);const o={sidebar_position:2},l="Myth: Applications Don\u2019t Need Readiness or Liveness Probes",a={},d=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"The Reality",id:"the-reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function c(e){const n={code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"myth-applications-dont-need-readiness-or-liveness-probes",children:"Myth: Applications Don\u2019t Need Readiness or Liveness Probes"})}),"\n",(0,t.jsx)(n.p,{children:"A team deployed a microservice without readiness or liveness probes. In production, Pods started receiving traffic before fully initializing, causing immediate 500 errors. One Pod even hung during startup, but Kubernetes didn\u2019t restart it because there was no liveness probe."}),"\n",(0,t.jsx)(n.p,{children:"The result: a visible outage lasting over an hour. All of it could have been prevented with proper health probes."}),"\n",(0,t.jsx)(n.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Developers come from VM-era environments where processes were long-lived"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"They assume Kubernetes automatically knows if an app is healthy"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Health checks seem \u201cextra work\u201d during development"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The underlying idea: \u201cThe app either works or it doesn\u2019t. Kubernetes doesn\u2019t need to know.\u201d"}),"\n",(0,t.jsx)(n.h3,{id:"the-reality",children:"The Reality"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Readiness probes"})," control whether a Pod receives traffic. Without them:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"New Pods might receive traffic before fully initialized"}),"\n",(0,t.jsx)(n.li,{children:"Rolling updates may fail silently"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Liveness probes"})," detect crashed or hung containers. Without them:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pods can remain in a broken state indefinitely"}),"\n",(0,t.jsx)(n.li,{children:"Crash loops may not be detected in time"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Kubernetes does not assume your application is healthy \u2014 you must tell it explicitly."})}),"\n",(0,t.jsx)(n.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 1: Deploy a Pod Without Probes"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl run probe-demo --image=nginx --port=80 --labels app=probe-demo\n"})}),"\n",(0,t.jsx)(n.p,{children:"Simulate slow startup by adding sleep in entrypoint (if possible)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 2: Expose a Service"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl expose pod probe-demo --port=80 --target-port=80 --name=probe-demo-svc\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 3: Test Access Immediately"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"curl <service-ip>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Observation: Pod receives traffic even if it\u2019s not ready, possibly causing errors if initialization isn\u2019t complete."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 4: Add a Readiness Probe"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"readinessProbe:\r\n  httpGet:\r\n    path: /\r\n    port: 80\r\n  initialDelaySeconds: 10\n"})}),"\n",(0,t.jsx)(n.p,{children:"Apply it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f probe-demo.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Observation: Pod only receives traffic after becoming ready. Traffic is blocked during initialization."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 5: Add a Liveness Probe"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"livenessProbe:\r\n  httpGet:\r\n    path: /\r\n    port: 80\r\n  initialDelaySeconds: 10\r\n  periodSeconds: 5\n"})}),"\n",(0,t.jsx)(n.p,{children:"Observation: If the Pod hangs, Kubernetes automatically restarts it, preventing long outages."}),"\n",(0,t.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Readiness and liveness probes are critical for production reliability"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Never assume Kubernetes can detect application failure automatically"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Readiness controls traffic routing;   liveness controls self-healing"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Missing probes can cause outages, failed rollouts, or silent failures"}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);