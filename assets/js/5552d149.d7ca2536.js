"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8668],{7600:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"k8s-core-myths/architecture-myths/Kubernetes_Clusters_Can\'t_Function_Without_Kube-Proxy","title":"Myth: Kubernetes Clusters Can\'t Function Without Kube-Proxy","description":"You deploy a Kubernetes cluster and start checking the usual system components. API server? Running. Controller manager? Running. Kube-Proxy? Wait\u2026 it\'s missing! You double-check the namespace, logs, and even the deployment\u2014nothing. But surprisingly, your pods and services are still communicating just fine. How is this possible? Isn\'t Kube-Proxy essential for cluster networking?","source":"@site/docs/k8s-core-myths/architecture-myths/Kubernetes_Clusters_Can\'t_Function_Without_Kube-Proxy.md","sourceDirName":"k8s-core-myths/architecture-myths","slug":"/k8s-core-myths/architecture-myths/Kubernetes_Clusters_Can\'t_Function_Without_Kube-Proxy","permalink":"/k8s-core-myths/architecture-myths/Kubernetes_Clusters_Can\'t_Function_Without_Kube-Proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-myths/website/blob/main/docs/k8s-core-myths/architecture-myths/Kubernetes_Clusters_Can\'t_Function_Without_Kube-Proxy.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"k8sCoreMythsSidebar","previous":{"title":"Myth: Kubelet is Exclusive to Worker Nodes","permalink":"/k8s-core-myths/architecture-myths/Kubelet_is_Exclusive_to_Worker_Nodes"},"next":{"title":"Myth: Kubernetes Networking Works Fine Without a CNI Plugin","permalink":"/k8s-core-myths/architecture-myths/Kubernetes_Networking_Works_Fine_Without_a_CNI_Plugin"}}');var i=t(4848),r=t(8453);const o={sidebar_position:3},l="Myth: Kubernetes Clusters Can't Function Without Kube-Proxy",a={},c=[{value:"Why This Myth Exists?",id:"why-this-myth-exists",level:3},{value:"Reality",id:"reality",level:3},{value:"Experiment &amp; Validate",id:"experiment--validate",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function u(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"myth-kubernetes-clusters-cant-function-without-kube-proxy",children:"Myth: Kubernetes Clusters Can't Function Without Kube-Proxy"})}),"\n",(0,i.jsx)(n.p,{children:"You deploy a Kubernetes cluster and start checking the usual system components. API server? Running. Controller manager? Running. Kube-Proxy? Wait\u2026 it's missing! You double-check the namespace, logs, and even the deployment\u2014nothing. But surprisingly, your pods and services are still communicating just fine. How is this possible? Isn't Kube-Proxy essential for cluster networking?"}),"\n",(0,i.jsx)(n.h3,{id:"why-this-myth-exists",children:"Why This Myth Exists?"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kube-Proxy is enabled by default"})," in most Kubernetes distributions, making it appear mandatory."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Traditional Kubernetes networking relies on iptables or IPVS,"})," which are managed by Kube-Proxy, reinforcing its perceived necessity."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Many engineers are unaware of eBPF-based networking solutions,"})," such as Cilium, which can entirely replace Kube-Proxy while improving performance and scalability."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"reality",children:"Reality"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Kube-Proxy is a ",(0,i.jsx)(n.strong,{children:"default networking component"})," in Kubernetes, but it is not mandatory for cluster functionality. Kubernetes networking is designed to support multiple implementations, and modern solutions can replace Kube-Proxy entirely."]}),"\n",(0,i.jsxs)(n.li,{children:["Newer networking models, such as ",(0,i.jsx)(n.strong,{children:"eBPF-based CNIs (e.g., Cilium, Calico eBPF, and Katran),"})," bypass the need for Kube-Proxy by directly handling packet processing within the kernel. These solutions not only eliminate the dependency on iptables/IPVS but also improve performance, scalability, and security by reducing latency and enabling fine-grained traffic control."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Many high-performance Kubernetes clusters"}),"\u2014especially those optimized for large-scale workloads\u2014choose to disable Kube-Proxy in favor of these more efficient networking alternatives."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"experiment--validate",children:"Experiment & Validate"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1: Disable Kube-Proxy"}),"\r\nScale down Kube-Proxy to remove it from the cluster:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl -n kube-system scale deployment kube-proxy --replicas=0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2: Install Cilium Without Kube-Proxy"}),"\r\nUse Cilium as a replacement, enabling eBPF-based networking:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"helm install cilium cilium/cilium --set kubeProxyReplacement=strict\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3: Deploy a Service and Test Connectivity"}),"\r\nCreate an Nginx pod and expose it as a service:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl run nginx --image=nginx --port=80 --expose\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now, check if the service works without Kube-Proxy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl run test-pod --image=busybox --restart=Never --rm -it -- wget -qO- nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"If successful, you\u2019ll see the Nginx welcome page, proving that Kubernetes networking works without Kube-Proxy."}),"\n",(0,i.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kube-Proxy is NOT mandatory"}),"\u2014Kubernetes networking can function without it."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"eBPF-based CNIs (Cilium, Calico eBPF, etc.) can fully replace Kube-Proxy"}),", offering better performance and scalability."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Choosing the right networking approach is crucial"}),"\u2014understanding Kubernetes networking beyond Kube-Proxy helps optimize cluster efficiency, security, and observability."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var s=t(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);